package Model;

import static org.junit.Assert.*;
import static play.test.Helpers.GET;
import static play.test.Helpers.route;

import java.util.ArrayList;
import java.util.LinkedHashMap;
import java.util.concurrent.ExecutionException;

import org.junit.Test;

import com.fasterxml.jackson.core.JsonProcessingException;
import com.fasterxml.jackson.databind.JsonMappingException;
import com.fasterxml.jackson.databind.JsonNode;
import com.fasterxml.jackson.databind.ObjectMapper;

import Models.GithubResult;
import Models.RepoCollaborator;
import Models.RepoIssue;
import Models.RepositoryProfile;
import Utils.Cache;
import controllers.HomeController;
import play.mvc.Http;
import play.mvc.Result;
import play.test.Helpers;
import play.test.WithApplication;

public class RepositoryProfileTest extends WithApplication {

	String ApiResponseObjectString = "[{\"id\":15778981,\"node_id\":\"MDEwOlJlcG9zaXRvcnkxNTc3ODk4MQ==\",\"name\":\"smarthome\",\"full_name\":\"eclipse-archived/smarthome\",\"private\":false,\"owner\":{\"login\":\"eclipse-archived\",\"id\":46826618,\"node_id\":\"MDEyOk9yZ2FuaXphdGlvbjQ2ODI2NjE4\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/46826618?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/eclipse-archived\",\"html_url\":\"https://github.com/eclipse-archived\",\"followers_url\":\"https://api.github.com/users/eclipse-archived/followers\",\"following_url\":\"https://api.github.com/users/eclipse-archived/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/eclipse-archived/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/eclipse-archived/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/eclipse-archived/subscriptions\",\"organizations_url\":\"https://api.github.com/users/eclipse-archived/orgs\",\"repos_url\":\"https://api.github.com/users/eclipse-archived/repos\",\"events_url\":\"https://api.github.com/users/eclipse-archived/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/eclipse-archived/received_events\",\"type\":\"Organization\",\"site_admin\":false},\"html_url\":\"https://github.com/eclipse-archived/smarthome\",\"description\":\"EclipseSmartHome™project\",\"fork\":false,\"url\":\"https://api.github.com/repos/eclipse-archived/smarthome\",\"forks_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/forks\",\"keys_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/keys{/key_id}\",\"collaborators_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/collaborators{/collaborator}\",\"teams_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/teams\",\"hooks_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/hooks\",\"issue_events_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/issues/events{/number}\",\"events_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/events\",\"assignees_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/assignees{/user}\",\"branches_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/branches{/branch}\",\"tags_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/tags\",\"blobs_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/git/blobs{/sha}\",\"git_tags_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/git/tags{/sha}\",\"git_refs_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/git/refs{/sha}\",\"trees_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/git/trees{/sha}\",\"statuses_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/statuses/{sha}\",\"languages_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/languages\",\"stargazers_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/stargazers\",\"contributors_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/contributors\",\"subscribers_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/subscribers\",\"subscription_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/subscription\",\"commits_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/commits{/sha}\",\"git_commits_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/git/commits{/sha}\",\"comments_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/comments{/number}\",\"issue_comment_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/issues/comments{/number}\",\"contents_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/contents/{+path}\",\"compare_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/compare/{base}...{head}\",\"merges_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/merges\",\"archive_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/{archive_format}{/ref}\",\"downloads_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/downloads\",\"issues_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/issues{/number}\",\"pulls_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/pulls{/number}\",\"milestones_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/milestones{/number}\",\"notifications_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/notifications{?since,all,participating}\",\"labels_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/labels{/name}\",\"releases_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/releases{/id}\",\"deployments_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/deployments\",\"created_at\":\"2014-01-09T20:47:19Z\",\"updated_at\":\"2021-11-18T15:37:33Z\",\"pushed_at\":\"2020-05-07T14:11:52Z\",\"git_url\":\"git://github.com/eclipse-archived/smarthome.git\",\"ssh_url\":\"git@github.com:eclipse-archived/smarthome.git\",\"clone_url\":\"https://github.com/eclipse-archived/smarthome.git\",\"svn_url\":\"https://github.com/eclipse-archived/smarthome\",\"homepage\":\"https://www.eclipse.org/smarthome/\",\"size\":67215,\"stargazers_count\":865,\"watchers_count\":865,\"language\":\"Java\",\"has_issues\":true,\"has_projects\":true,\"has_downloads\":true,\"has_wiki\":true,\"has_pages\":true,\"forks_count\":828,\"mirror_url\":null,\"archived\":true,\"disabled\":false,\"open_issues_count\":475,\"license\":{\"key\":\"epl-2.0\",\"name\":\"EclipsePublicLicense2.0\",\"spdx_id\":\"EPL-2.0\",\"url\":\"https://api.github.com/licenses/epl-2.0\",\"node_id\":\"MDc6TGljZW5zZTMy\"},\"allow_forking\":true,\"is_template\":false,\"topics\":[\"eclipseiot\",\"home-automation\",\"internet-of-things\",\"iot\",\"java\",\"smarthome\"],\"visibility\":\"public\",\"forks\":828,\"open_issues\":475,\"watchers\":865,\"default_branch\":\"master\",\"score\":1.0},{\"id\":53614190,\"node_id\":\"MDEwOlJlcG9zaXRvcnk1MzYxNDE5MA==\",\"name\":\"mosquitto\",\"full_name\":\"eclipse/mosquitto\",\"private\":false,\"owner\":{\"login\":\"eclipse\",\"id\":56974,\"node_id\":\"MDEyOk9yZ2FuaXphdGlvbjU2OTc0\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/56974?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/eclipse\",\"html_url\":\"https://github.com/eclipse\",\"followers_url\":\"https://api.github.com/users/eclipse/followers\",\"following_url\":\"https://api.github.com/users/eclipse/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/eclipse/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/eclipse/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/eclipse/subscriptions\",\"organizations_url\":\"https://api.github.com/users/eclipse/orgs\",\"repos_url\":\"https://api.github.com/users/eclipse/repos\",\"events_url\":\"https://api.github.com/users/eclipse/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/eclipse/received_events\",\"type\":\"Organization\",\"site_admin\":false},\"html_url\":\"https://github.com/eclipse/mosquitto\",\"description\":\"EclipseMosquitto-AnopensourceMQTTbroker\",\"fork\":false,\"url\":\"https://api.github.com/repos/eclipse/mosquitto\",\"forks_url\":\"https://api.github.com/repos/eclipse/mosquitto/forks\",\"keys_url\":\"https://api.github.com/repos/eclipse/mosquitto/keys{/key_id}\",\"collaborators_url\":\"https://api.github.com/repos/eclipse/mosquitto/collaborators{/collaborator}\",\"teams_url\":\"https://api.github.com/repos/eclipse/mosquitto/teams\",\"hooks_url\":\"https://api.github.com/repos/eclipse/mosquitto/hooks\",\"issue_events_url\":\"https://api.github.com/repos/eclipse/mosquitto/issues/events{/number}\",\"events_url\":\"https://api.github.com/repos/eclipse/mosquitto/events\",\"assignees_url\":\"https://api.github.com/repos/eclipse/mosquitto/assignees{/user}\",\"branches_url\":\"https://api.github.com/repos/eclipse/mosquitto/branches{/branch}\",\"tags_url\":\"https://api.github.com/repos/eclipse/mosquitto/tags\",\"blobs_url\":\"https://api.github.com/repos/eclipse/mosquitto/git/blobs{/sha}\",\"git_tags_url\":\"https://api.github.com/repos/eclipse/mosquitto/git/tags{/sha}\",\"git_refs_url\":\"https://api.github.com/repos/eclipse/mosquitto/git/refs{/sha}\",\"trees_url\":\"https://api.github.com/repos/eclipse/mosquitto/git/trees{/sha}\",\"statuses_url\":\"https://api.github.com/repos/eclipse/mosquitto/statuses/{sha}\",\"languages_url\":\"https://api.github.com/repos/eclipse/mosquitto/languages\",\"stargazers_url\":\"https://api.github.com/repos/eclipse/mosquitto/stargazers\",\"contributors_url\":\"https://api.github.com/repos/eclipse/mosquitto/contributors\",\"subscribers_url\":\"https://api.github.com/repos/eclipse/mosquitto/subscribers\",\"subscription_url\":\"https://api.github.com/repos/eclipse/mosquitto/subscription\",\"commits_url\":\"https://api.github.com/repos/eclipse/mosquitto/commits{/sha}\",\"git_commits_url\":\"https://api.github.com/repos/eclipse/mosquitto/git/commits{/sha}\",\"comments_url\":\"https://api.github.com/repos/eclipse/mosquitto/comments{/number}\",\"issue_comment_url\":\"https://api.github.com/repos/eclipse/mosquitto/issues/comments{/number}\",\"contents_url\":\"https://api.github.com/repos/eclipse/mosquitto/contents/{+path}\",\"compare_url\":\"https://api.github.com/repos/eclipse/mosquitto/compare/{base}...{head}\",\"merges_url\":\"https://api.github.com/repos/eclipse/mosquitto/merges\",\"archive_url\":\"https://api.github.com/repos/eclipse/mosquitto/{archive_format}{/ref}\",\"downloads_url\":\"https://api.github.com/repos/eclipse/mosquitto/downloads\",\"issues_url\":\"https://api.github.com/repos/eclipse/mosquitto/issues{/number}\",\"pulls_url\":\"https://api.github.com/repos/eclipse/mosquitto/pulls{/number}\",\"milestones_url\":\"https://api.github.com/repos/eclipse/mosquitto/milestones{/number}\",\"notifications_url\":\"https://api.github.com/repos/eclipse/mosquitto/notifications{?since,all,participating}\",\"labels_url\":\"https://api.github.com/repos/eclipse/mosquitto/labels{/name}\",\"releases_url\":\"https://api.github.com/repos/eclipse/mosquitto/releases{/id}\",\"deployments_url\":\"https://api.github.com/repos/eclipse/mosquitto/deployments\",\"created_at\":\"2016-03-10T20:19:09Z\",\"updated_at\":\"2021-11-21T20:44:48Z\",\"pushed_at\":\"2021-11-21T03:12:07Z\",\"git_url\":\"git://github.com/eclipse/mosquitto.git\",\"ssh_url\":\"git@github.com:eclipse/mosquitto.git\",\"clone_url\":\"https://github.com/eclipse/mosquitto.git\",\"svn_url\":\"https://github.com/eclipse/mosquitto\",\"homepage\":\"https://mosquitto.org\",\"size\":16102,\"stargazers_count\":5723,\"watchers_count\":5723,\"language\":\"C\",\"has_issues\":true,\"has_projects\":true,\"has_downloads\":true,\"has_wiki\":false,\"has_pages\":false,\"forks_count\":1784,\"mirror_url\":null,\"archived\":false,\"disabled\":false,\"open_issues_count\":494,\"license\":{\"key\":\"other\",\"name\":\"Other\",\"spdx_id\":\"NOASSERTION\",\"url\":null,\"node_id\":\"MDc6TGljZW5zZTA=\"},\"allow_forking\":true,\"is_template\":false,\"topics\":[\"broker\",\"eclipse-iot\",\"libwebsockets\",\"mosquitto\",\"mqtt\"],\"visibility\":\"public\",\"forks\":1784,\"open_issues\":494,\"watchers\":5723,\"default_branch\":\"master\",\"score\":1.0}]";
	String ResponseFromIssues = "[{\"url\":\"https://api.github.com/repos/eclipse-archived/smarthome/issues/6921\",\"repository_url\":\"https://api.github.com/repos/eclipse-archived/smarthome\",\"labels_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/issues/6921/labels{/name}\",\"comments_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/issues/6921/comments\",\"events_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/issues/6921/events\",\"html_url\":\"https://github.com/eclipse-archived/smarthome/pull/6921\",\"id\":609416443,\"node_id\":\"MDExOlB1bGxSZXF1ZXN0NDEwOTk5MTAy\",\"number\":6921,\"title\":\"Bumpjqueryfrom2.1.3to3.5.0in/extensions/ui/org.eclipse.smarthome.ui.paper\",\"user\":{\"login\":\"dependabot[bot]\",\"id\":49699333,\"node_id\":\"MDM6Qm90NDk2OTkzMzM=\",\"avatar_url\":\"https://avatars.githubusercontent.com/in/29110?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/dependabot%5Bbot%5D\",\"html_url\":\"https://github.com/apps/dependabot\",\"followers_url\":\"https://api.github.com/users/dependabot%5Bbot%5D/followers\",\"following_url\":\"https://api.github.com/users/dependabot%5Bbot%5D/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/dependabot%5Bbot%5D/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/dependabot%5Bbot%5D/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/dependabot%5Bbot%5D/subscriptions\",\"organizations_url\":\"https://api.github.com/users/dependabot%5Bbot%5D/orgs\",\"repos_url\":\"https://api.github.com/users/dependabot%5Bbot%5D/repos\",\"events_url\":\"https://api.github.com/users/dependabot%5Bbot%5D/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/dependabot%5Bbot%5D/received_events\",\"type\":\"Bot\",\"site_admin\":false},\"labels\":[{\"id\":1688151457,\"node_id\":\"MDU6TGFiZWwxNjg4MTUxNDU3\",\"url\":\"https://api.github.com/repos/eclipse-archived/smarthome/labels/dependencies\",\"name\":\"dependencies\",\"color\":\"0366d6\",\"default\":false,\"description\":\"Pullrequeststhatupdateadependencyfile\"}],\"state\":\"open\",\"locked\":true,\"assignee\":null,\"assignees\":[],\"milestone\":null,\"comments\":0,\"created_at\":\"2020-04-29T22:56:14Z\",\"updated_at\":\"2020-04-29T22:56:15Z\",\"closed_at\":null,\"author_association\":\"NONE\",\"active_lock_reason\":null,\"draft\":false,\"pull_request\":{\"url\":\"https://api.github.com/repos/eclipse-archived/smarthome/pulls/6921\",\"html_url\":\"https://github.com/eclipse-archived/smarthome/pull/6921\",\"diff_url\":\"https://github.com/eclipse-archived/smarthome/pull/6921.diff\",\"patch_url\":\"https://github.com/eclipse-archived/smarthome/pull/6921.patch\",\"merged_at\":null},\"body\":\"Bumps[jquery](https://github.com/jquery/jquery)from2.1.3to3.5.0.\\n<details>\\n<summary>Commits</summary>\\n<ul>\\n<li><ahref=\\\"https://github.com/jquery/jquery/commit/7a0a850f3d41c0412609c1d32b1e602d4afe2f4e\\\"><code>7a0a850</code></a>3.5.0</li>\\n<li><ahref=\\\"https://github.com/jquery/jquery/commit/8570a08f6689223aa06ca8cc51d488c6d81d44f9\\\"><code>8570a08</code></a>Release:UpdateAUTHORS.txt</li>\\n<li><ahref=\\\"https://github.com/jquery/jquery/commit/da3dd85b63c4e3a6a768132c2a83a1a6eec24840\\\"><code>da3dd85</code></a>Ajax:DonotexecutescriptsforunsuccessfulHTTPresponses</li>\\n<li><ahref=\\\"https://github.com/jquery/jquery/commit/065143c2e93512eb0c82d1b344b71d06eb7cf01c\\\"><code>065143c</code></a>Ajax:Overwrites.contentTypewithcontent-typeheadervalue,ifany</li>\\n<li><ahref=\\\"https://github.com/jquery/jquery/commit/1a4f10ddc37c34c6dc3a451ee451b5c6cf367399\\\"><code>1a4f10d</code></a>Tests:BlacklistonefocusintestinIE</li>\\n<li><ahref=\\\"https://github.com/jquery/jquery/commit/9e15d6b469556eccfa607c5ecf53b20c84529125\\\"><code>9e15d6b</code></a>Event:Useonlyonefocusin/outhandlerpermatchingwindow&document</li>\\n<li><ahref=\\\"https://github.com/jquery/jquery/commit/966a70909019aa09632c87c0002c522fa4a1e30e\\\"><code>966a709</code></a>Manipulation:Skiptheselectwrapperfor<option>outsideofIE9</li>\\n<li><ahref=\\\"https://github.com/jquery/jquery/commit/1d61fd9407e6fbe82fe55cb0b938307aa0791f77\\\"><code>1d61fd9</code></a>Manipulation:MakejQuery.htmlPrefilteranidentityfunction</li>\\n<li><ahref=\\\"https://github.com/jquery/jquery/commit/04bf577e2f961c9dde85ddadc77f71bc7bc671cc\\\"><code>04bf577</code></a>Selector:UpdateSizzlefrom2.3.4to2.3.5</li>\\n<li><ahref=\\\"https://github.com/jquery/jquery/commit/7506c9ca62a2f3ef773e19385918c31e9d62d412\\\"><code>7506c9c</code></a>Build:ResolveTravisconfigwarnings</li>\\n<li>Additionalcommitsviewablein<ahref=\\\"https://github.com/jquery/jquery/compare/2.1.3...3.5.0\\\">compareview</a></li>\\n</ul>\\n</details>\\n<details>\\n<summary>Maintainerchanges</summary>\\n<p>Thisversionwaspushedtonpmby<ahref=\\\"https://www.npmjs.com/~mgol\\\">mgol</a>,anewreleaserforjquerysinceyourcurrentversion.</p>\\n</details>\\n<br/>\\n\\n\\n[![Dependabotcompatibilityscore](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=jquery&package-manager=npm_and_yarn&previous-version=2.1.3&new-version=3.5.0)](https://help.github.com/articles/configuring-automated-security-fixes)\\n\\nDependabotwillresolveanyconflictswiththisPRaslongasyoudon'talterityourself.Youcanalsotriggerarebasemanuallybycommenting`@dependabotrebase`.\\n\\n[//]:#(dependabot-automerge-start)\\n[//]:#(dependabot-automerge-end)\\n\\n---\\n\\n<details>\\n<summary>Dependabotcommandsandoptions</summary>\\n<br/>\\n\\nYoucantriggerDependabotactionsbycommentingonthisPR:\\n-`@dependabotrebase`willrebasethisPR\\n-`@dependabotrecreate`willrecreatethisPR,overwritinganyeditsthathavebeenmadetoit\\n-`@dependabotmerge`willmergethisPRafteryourCIpassesonit\\n-`@dependabotsquashandmerge`willsquashandmergethisPRafteryourCIpassesonit\\n-`@dependabotcancelmerge`willcancelapreviouslyrequestedmergeandblockautomerging\\n-`@dependabotreopen`willreopenthisPRifitisclosed\\n-`@dependabotclose`willclosethisPRandstopDependabotrecreatingit.Youcanachievethesameresultbyclosingitmanually\\n-`@dependabotignorethismajorversion`willclosethisPRandstopDependabotcreatinganymoreforthismajorversion(unlessyoureopenthePRorupgradetoityourself)\\n-`@dependabotignorethisminorversion`willclosethisPRandstopDependabotcreatinganymoreforthisminorversion(unlessyoureopenthePRorupgradetoityourself)\\n-`@dependabotignorethisdependency`willclosethisPRandstopDependabotcreatinganymoreforthisdependency(unlessyoureopenthePRorupgradetoityourself)\\n-`@dependabotusetheselabels`willsetthecurrentlabelsasthedefaultforfuturePRsforthisrepoandlanguage\\n-`@dependabotusethesereviewers`willsetthecurrentreviewersasthedefaultforfuturePRsforthisrepoandlanguage\\n-`@dependabotusetheseassignees`willsetthecurrentassigneesasthedefaultforfuturePRsforthisrepoandlanguage\\n-`@dependabotusethismilestone`willsetthecurrentmilestoneasthedefaultforfuturePRsforthisrepoandlanguage\\n\\nYoucandisableautomatedsecurityfixPRsforthisrepofromthe[SecurityAlertspage](https://github.com/eclipse/smarthome/network/alerts).\\n\\n</details>\",\"reactions\":{\"url\":\"https://api.github.com/repos/eclipse-archived/smarthome/issues/6921/reactions\",\"total_count\":0,\"+1\":0,\"-1\":0,\"laugh\":0,\"hooray\":0,\"confused\":0,\"heart\":0,\"rocket\":0,\"eyes\":0},\"timeline_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/issues/6921/timeline\",\"performed_via_github_app\":null},{\"url\":\"https://api.github.com/repos/eclipse-archived/smarthome/issues/6920\",\"repository_url\":\"https://api.github.com/repos/eclipse-archived/smarthome\",\"labels_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/issues/6920/labels{/name}\",\"comments_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/issues/6920/comments\",\"events_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/issues/6920/events\",\"html_url\":\"https://github.com/eclipse-archived/smarthome/issues/6920\",\"id\":604820338,\"node_id\":\"MDU6SXNzdWU2MDQ4MjAzMzg=\",\"number\":6920,\"title\":\"GenericMQTTThingChannel\",\"user\":{\"login\":\"ngquan98\",\"id\":48288770,\"node_id\":\"MDQ6VXNlcjQ4Mjg4Nzcw\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/48288770?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/ngquan98\",\"html_url\":\"https://github.com/ngquan98\",\"followers_url\":\"https://api.github.com/users/ngquan98/followers\",\"following_url\":\"https://api.github.com/users/ngquan98/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/ngquan98/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/ngquan98/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/ngquan98/subscriptions\",\"organizations_url\":\"https://api.github.com/users/ngquan98/orgs\",\"repos_url\":\"https://api.github.com/users/ngquan98/repos\",\"events_url\":\"https://api.github.com/users/ngquan98/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/ngquan98/received_events\",\"type\":\"User\",\"site_admin\":false},\"labels\":[],\"state\":\"open\",\"locked\":true,\"assignee\":null,\"assignees\":[],\"milestone\":null,\"comments\":0,\"created_at\":\"2020-04-22T14:50:31Z\",\"updated_at\":\"2020-04-22T14:50:31Z\",\"closed_at\":null,\"author_association\":\"NONE\",\"active_lock_reason\":null,\"body\":\"I'musingESP8266andDHT22sensortomeasuretemperaturethensendtoOpenHabthroughGenericMQTTThing.I'vesetupthingssuccesfully,butthebugsiswhenMQTTmessagepublishtothebroker,it'thappeninsystemlog.InGenericMQTTThingChannel,IchooseNumbervaluetype,butwhenthemessageispublish,thesystemlogshowthat:\\r\\n\\r\\n>[WARN][ab.binding.mqtt.generic.ChannelState]-Command'29.80'notsupportedbytype'OnOffValue':Noenumconstantorg.eclipse.smarthome.core.library.types.OnOffType.29.80\\\"\\r\\n\\r\\nEventhoughIchooseChannelisNumberorStringtype,Ialwaysreceivethatwarning.Ithinkmaybethisisasmallbug.\\r\\n(SorryformybadEnglish)\",\"reactions\":{\"url\":\"https://api.github.com/repos/eclipse-archived/smarthome/issues/6920/reactions\",\"total_count\":0,\"+1\":0,\"-1\":0,\"laugh\":0,\"hooray\":0,\"confused\":0,\"heart\":0,\"rocket\":0,\"eyes\":0},\"timeline_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/issues/6920/timeline\",\"performed_via_github_app\":null},{\"url\":\"https://api.github.com/repos/eclipse-archived/smarthome/issues/6919\",\"repository_url\":\"https://api.github.com/repos/eclipse-archived/smarthome\",\"labels_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/issues/6919/labels{/name}\",\"comments_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/issues/6919/comments\",\"events_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/issues/6919/events\",\"html_url\":\"https://github.com/eclipse-archived/smarthome/issues/6919\",\"id\":559537554,\"node_id\":\"MDU6SXNzdWU1NTk1Mzc1NTQ=\",\"number\":6919,\"title\":\"UpdatingtheXtextCommunityWebsite\",\"user\":{\"login\":\"miklossy\",\"id\":20393472,\"node_id\":\"MDQ6VXNlcjIwMzkzNDcy\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/20393472?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/miklossy\",\"html_url\":\"https://github.com/miklossy\",\"followers_url\":\"https://api.github.com/users/miklossy/followers\",\"following_url\":\"https://api.github.com/users/miklossy/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/miklossy/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/miklossy/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/miklossy/subscriptions\",\"organizations_url\":\"https://api.github.com/users/miklossy/orgs\",\"repos_url\":\"https://api.github.com/users/miklossy/repos\",\"events_url\":\"https://api.github.com/users/miklossy/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/miklossy/received_events\",\"type\":\"User\",\"site_admin\":false},\"labels\":[],\"state\":\"open\",\"locked\":true,\"assignee\":null,\"assignees\":[],\"milestone\":null,\"comments\":0,\"created_at\":\"2020-02-04T07:33:20Z\",\"updated_at\":\"2020-02-04T07:33:20Z\",\"closed_at\":null,\"author_association\":\"NONE\",\"active_lock_reason\":null,\"body\":\"HelloEclipseSmartHometeam,\\r\\n\\r\\nTheXtextteamwouldliketoupdatethe[Xtextcommunitywebsite](https://www.eclipse.org/Xtext/community.html)listingallthecoolprojectspeoplearebuildingaroundXtext/Xtend.\\r\\n\\r\\nSeealsothecorresponding[GitHubissue](https://github.com/eclipse/xtext/issues/1541)and[Bugzillaticket](https://bugs.eclipse.org/bugs/show_bug.cgi?id=328477).\\r\\n\\r\\nIfyouareinterestedthattheEclipseSmartHomeprojectislistedthere,pleaseprovidethefollowinginformationasacommenttothisissue:\\r\\n\\r\\n```\\r\\n<tr>\\r\\n\\t<td><ahref=\\\"project_link\\\">project_name</a></td>\\r\\n\\t<td>project_description_max_2_sentences</td>\\r\\n\\t<td>license</td>\\r\\n\\t<td>category</td>\\r\\n\\t<td>author(s)</td>\\r\\n</tr>\\r\\n\\r\\n```\\r\\nWewillthenupdatetheXtextcommunitywebsiteandgetitonlineassoonaspossible.\\r\\n\\r\\nThanks!\\r\\nTamás\",\"reactions\":{\"url\":\"https://api.github.com/repos/eclipse-archived/smarthome/issues/6919/reactions\",\"total_count\":0,\"+1\":0,\"-1\":0,\"laugh\":0,\"hooray\":0,\"confused\":0,\"heart\":0,\"rocket\":0,\"eyes\":0},\"timeline_url\":\"https://api.github.com/repos/eclipse-archived/smarthome/issues/6919/timeline\",\"performed_via_github_app\":null}]";
	String ResponseFromCollaborators = "[{\"login\":\"kaikreuzer\",\"id\":3244965,\"node_id\":\"MDQ6VXNlcjMyNDQ5NjU=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/3244965?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/kaikreuzer\",\"html_url\":\"https://github.com/kaikreuzer\",\"followers_url\":\"https://api.github.com/users/kaikreuzer/followers\",\"following_url\":\"https://api.github.com/users/kaikreuzer/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/kaikreuzer/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/kaikreuzer/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/kaikreuzer/subscriptions\",\"organizations_url\":\"https://api.github.com/users/kaikreuzer/orgs\",\"repos_url\":\"https://api.github.com/users/kaikreuzer/repos\",\"events_url\":\"https://api.github.com/users/kaikreuzer/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/kaikreuzer/received_events\",\"type\":\"User\",\"site_admin\":false,\"contributions\":1465},{\"login\":\"maggu2810\",\"id\":204670,\"node_id\":\"MDQ6VXNlcjIwNDY3MA==\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/204670?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/maggu2810\",\"html_url\":\"https://github.com/maggu2810\",\"followers_url\":\"https://api.github.com/users/maggu2810/followers\",\"following_url\":\"https://api.github.com/users/maggu2810/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/maggu2810/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/maggu2810/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/maggu2810/subscriptions\",\"organizations_url\":\"https://api.github.com/users/maggu2810/orgs\",\"repos_url\":\"https://api.github.com/users/maggu2810/repos\",\"events_url\":\"https://api.github.com/users/maggu2810/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/maggu2810/received_events\",\"type\":\"User\",\"site_admin\":false,\"contributions\":614},{\"login\":\"sjsf\",\"id\":2592443,\"node_id\":\"MDQ6VXNlcjI1OTI0NDM=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/2592443?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/sjsf\",\"html_url\":\"https://github.com/sjsf\",\"followers_url\":\"https://api.github.com/users/sjsf/followers\",\"following_url\":\"https://api.github.com/users/sjsf/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/sjsf/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/sjsf/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/sjsf/subscriptions\",\"organizations_url\":\"https://api.github.com/users/sjsf/orgs\",\"repos_url\":\"https://api.github.com/users/sjsf/repos\",\"events_url\":\"https://api.github.com/users/sjsf/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/sjsf/received_events\",\"type\":\"User\",\"site_admin\":false,\"contributions\":417},{\"login\":\"aounhaider1\",\"id\":5161937,\"node_id\":\"MDQ6VXNlcjUxNjE5Mzc=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/5161937?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/aounhaider1\",\"html_url\":\"https://github.com/aounhaider1\",\"followers_url\":\"https://api.github.com/users/aounhaider1/followers\",\"following_url\":\"https://api.github.com/users/aounhaider1/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/aounhaider1/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/aounhaider1/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/aounhaider1/subscriptions\",\"organizations_url\":\"https://api.github.com/users/aounhaider1/orgs\",\"repos_url\":\"https://api.github.com/users/aounhaider1/repos\",\"events_url\":\"https://api.github.com/users/aounhaider1/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/aounhaider1/received_events\",\"type\":\"User\",\"site_admin\":false,\"contributions\":265}]";
	
	@Test
	public void testRepoProfile() throws JsonMappingException, JsonProcessingException, InterruptedException, ExecutionException {
	
		
		ArrayList<String> TestTopics =  new ArrayList<>();
		TestTopics.add("eclipseiot");
		TestTopics.add("home-automation");
		TestTopics.add("internet-of-things");
		TestTopics.add("iot");
		TestTopics.add("java");
		TestTopics.add("smarthome");
		ObjectMapper mapper = new ObjectMapper();
	   
		
		JsonNode ApiResponseObject = mapper.readTree(ApiResponseObjectString);
		JsonNode IssuesResponseObject = mapper.readTree(ResponseFromIssues);
		JsonNode CollaboratorsResponseObject = mapper.readTree(ResponseFromCollaborators);

		RepositoryProfile newRepository = new RepositoryProfile(ApiResponseObject,"eclipse", "15778981");
		RepositoryProfile emptyRepositoryFortest = new RepositoryProfile(ApiResponseObject,"eclipse", "15324114");
		
		// Cache cache = new Cache();		
		// HomeController hc = new HomeController(null, cache);
		
		
		newRepository.getDataFromResult(IssuesResponseObject, "Issues");
		newRepository.getDataFromResult(CollaboratorsResponseObject, "Collab");
		newRepository.getDataFromResult(CollaboratorsResponseObject, "None");

		ArrayList<String> topicsList =  newRepository.getTopicsList();
				
		assertEquals("smarthome" ,newRepository.repoName);
		assertEquals("eclipse-archived" ,newRepository.ownerName);
		assertEquals(TestTopics.toString() ,newRepository.getTopicsList().toString());
		

	}
	
//	Repository Profile Request Test
//	   @Test
//	   public void testRepoProfileRequest() {
//	       Http.RequestBuilder request = new Http.RequestBuilder()
//	               .method(GET)
//	               .uri("/repo/eclipse/15778981");
//
//	       Result result = route(app, request);
//	       assertEquals(200, result.status());
//	   }
	   
		@Test
		public void testIssues(){
			Http.RequestBuilder req = new Http.RequestBuilder().method(Helpers.GET).uri("/statistics/");
			Result issuesResult = Helpers.route(app, req);
			assertEquals(Http.Status.OK, issuesResult.status());	
		}
	
}
